<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tienda Online - Ingredientes</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f5f5;
    }

    /* ANIMACIONES */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideInLeft {
      from { opacity: 0; transform: translateX(-30px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes slideInRight {
      from { opacity: 0; transform: translateX(30px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes shimmer {
      0% { background-position: -1000px 0; }
      100% { background-position: 1000px 0; }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    /* BARRA SUPERIOR */
    .top-bar {
      background: linear-gradient(90deg, #8B4513 0%, #D2691E 100%);
      padding: 10px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: white;
      animation: slideInLeft 0.6s ease-out;
      box-shadow: 0 2px 10px rgba(0,0,0,0.15);
    }

    .top-bar-left {
      display: flex;
      gap: 20px;
      align-items: center;
    }

    .btn-regresar {
      background: #D2691E;
      color: white;
      border: none;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn-regresar::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255,255,255,0.2);
      transition: left 0.3s;
    }

    .btn-regresar:hover::before {
      left: 100%;
    }

    .btn-regresar:hover {
      background: #E07B2F;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    /* HEADER PRINCIPAL - CENTRADO */
    .main-header {
      background: linear-gradient(to bottom, #f7efe6 0%, #fff7f0 100%);
      padding: 30px 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
      animation: fadeIn 0.8s ease-out;
    }

    .logo-section {
      display: flex;
      align-items: center;
      gap: 20px;
      animation: scaleIn 0.8s ease-out;
    }

    .logo {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #A0522D 0%, #8B4513 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
      animation: float 3s ease-in-out infinite;
      border: 3px solid #D2691E;
      color: white;
      font-weight: bold;
    }

    .titulo-tienda {
      font-size: 56px;
      color: #5b3b2b;
      font-family: Georgia, serif;
      font-weight: normal;
      display: flex;
      align-items: center;
      gap: 15px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .icono-tienda {
      font-size: 56px;
      animation: pulse 2s ease-in-out infinite;
    }

    /* CONTENEDOR PRINCIPAL - SIN COLUMNA LATERAL */
    .page-layout {
      max-width: 1400px;
      margin: 30px auto;
      padding: 0 20px;
    }

    .container {
      width: 100%;
      padding: 20px 0;
    }

    .filtros {
      background: #fff;
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      animation: fadeIn 1s ease-out;
      position: relative;
      overflow: hidden;
    }

    .filtros::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        45deg,
        transparent,
        rgba(210, 105, 30, 0.05),
        transparent
      );
      animation: shimmer 3s infinite;
    }

    .busqueda-container {
      flex: 1;
      min-width: 200px;
      position: relative;
      z-index: 1;
    }

    .busqueda-container label {
      display: block;
      margin-bottom: 8px;
      color: #5b3b2b;
      font-weight: bold;
      font-size: 16px;
    }

    input {
      padding: 14px;
      width: 100%;
      border: 2px solid #A0522D;
      border-radius: 10px;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    input:focus {
      outline: none;
      border-color: #D2691E;
      box-shadow: 0 0 0 3px rgba(210, 105, 30, 0.1);
      transform: translateY(-2px);
    }

    .carrito-container {
      flex-shrink: 0;
      position: relative;
      z-index: 1;
    }

    .carrito-btn {
      background: linear-gradient(135deg, #A0522D 0%, #8B4513 100%);
      color: #fff; 
      border: none;
      padding: 14px 24px; 
      border-radius: 25px;
      font-weight: bold; 
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(139, 69, 19, 0.3);
      position: relative;
      overflow: hidden;
    }

    .carrito-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .carrito-btn:hover::before {
      width: 300px;
      height: 300px;
    }

    .carrito-btn:hover {
      background: linear-gradient(135deg, #D2691E 0%, #A0522D 100%);
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(139, 69, 19, 0.4);
    }

    .productos-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px,1fr));
      gap: 30px;
      animation: fadeIn 1.2s ease-out;
    }

    .producto-card {
      background: #fff;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      animation: scaleIn 0.5s ease-out backwards;
    }

    .producto-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(210, 105, 30, 0.1),
        transparent
      );
      transition: left 0.5s;
    }

    .producto-card:hover::before {
      left: 100%;
    }

    .producto-card:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 12px 24px rgba(0,0,0,0.15);
    }

    /* Animaci√≥n escalonada para las tarjetas */
    .producto-card:nth-child(1) { animation-delay: 0.1s; }
    .producto-card:nth-child(2) { animation-delay: 0.2s; }
    .producto-card:nth-child(3) { animation-delay: 0.3s; }
    .producto-card:nth-child(4) { animation-delay: 0.4s; }
    .producto-card:nth-child(5) { animation-delay: 0.5s; }
    .producto-card:nth-child(6) { animation-delay: 0.6s; }

    /* Badge de stock */
    .stock-badge {
      position: absolute;
      top: 15px;
      right: 15px;
      background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      z-index: 10;
      animation: slideInRight 0.5s ease-out;
    }

    .stock-badge.bajo {
      background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
      animation: pulse 1.5s ease-in-out infinite;
    }

    .stock-badge.agotado {
      background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
    }

    /* Unidad de medida */
    .unidad-medida {
      background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
      color: #2E7D32;
      padding: 6px 14px;
      border-radius: 8px;
      font-size: 13px;
      font-weight: bold;
      display: inline-block;
      margin-bottom: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }

    .producto-card:hover .unidad-medida {
      transform: scale(1.05);
    }

    .producto-img {
      width: 100%; 
      height: 220px;
      object-fit: cover; 
      border-radius: 10px;
      margin-bottom: 15px;
      transition: all 0.4s ease;
    }

    .producto-card:hover .producto-img {
      transform: scale(1.08);
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }

    .producto-card h3 {
      color: #5b3b2b;
      margin-bottom: 8px;
      font-size: 18px;
      transition: color 0.3s ease;
    }

    .producto-card:hover h3 {
      color: #D2691E;
    }

    /* Descripci√≥n del producto */
    .producto-descripcion {
      color: #6c757d;
      font-size: 13px;
      line-height: 1.4;
      margin: 8px 0;
      min-height: 40px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .producto-card .precio {
      color: #8B4513;
      font-size: 28px;
      font-weight: bold;
      margin: 12px 0;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }

    .producto-card:hover .precio {
      transform: scale(1.1);
      color: #D2691E;
    }

    .btn-agregar {
      margin-top: 15px;
      padding: 14px;
      background: linear-gradient(135deg, #D2691E 0%, #A0522D 100%);
      color: #fff; 
      border: none;
      border-radius: 10px;
      width: 100%; 
      cursor: pointer;
      font-size: 16px; 
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(210, 105, 30, 0.3);
      position: relative;
      overflow: hidden;
    }

    .btn-agregar::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,0.4);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .btn-agregar:hover::after {
      width: 300px;
      height: 300px;
    }

    .btn-agregar:hover {
      background: linear-gradient(135deg, #E07B2F 0%, #D2691E 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(210, 105, 30, 0.4);
    }

    .btn-agregar:active {
      transform: translateY(0);
    }

    .btn-agregar:disabled {
      background: linear-gradient(135deg, #ccc 0%, #999 100%);
      cursor: not-allowed;
      opacity: 0.6;
      transform: none;
    }

    /* MODAL */
    .modal { 
      display:none; 
      position:fixed; 
      top:0; 
      left:0; 
      width:100%;
      height:100%; 
      background:rgba(0,0,0,0.7); 
      padding:50px;
      z-index: 1000;
      overflow-y: auto;
      backdrop-filter: blur(5px);
      animation: fadeIn 0.3s ease-out;
    }

    .modal-contenido {
      background:#fff; 
      padding:35px;
      border-radius:20px; 
      max-width:650px;
      margin:auto;
      position: relative;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      animation: scaleIn 0.4s ease-out;
    }

    .modal-contenido h2 {
      color: #5b3b2b;
      margin-bottom: 25px;
      font-size: 28px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    .btn-cerrar {
      position: absolute;
      top: 15px;
      right: 15px;
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 20px;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(255, 107, 107, 0.3);
    }

    .btn-cerrar:hover {
      background: linear-gradient(135deg, #ff5252 0%, #e53935 100%);
      transform: rotate(90deg) scale(1.1);
      box-shadow: 0 6px 15px rgba(255, 107, 107, 0.4);
    }

    .carrito-item {
      padding: 15px;
      border-bottom: 1px solid #e0e0e0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
      animation: slideInLeft 0.3s ease-out;
    }

    .carrito-item:hover {
      background: #f9f9f9;
      padding-left: 20px;
    }

    .carrito-item-info {
      flex: 1;
    }

    .carrito-item-nombre {
      font-weight: bold;
      color: #5b3b2b;
      margin-bottom: 4px;
    }

    .carrito-item-unidad {
      font-size: 12px;
      color: #2E7D32;
      background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
      padding: 3px 10px;
      border-radius: 4px;
      display: inline-block;
    }

    #total-carrito {
      margin-top: 25px;
      color: #8B4513;
      font-size: 28px;
      text-align: right;
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
      animation: slideInRight 0.5s ease-out;
    }

    .btn-pagar {
      margin-top: 20px;
      padding: 16px;
      background: linear-gradient(135deg, #D2691E 0%, #A0522D 100%);
      color: white;
      border: none;
      border-radius: 12px;
      width: 100%;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 15px rgba(210, 105, 30, 0.3);
      position: relative;
      overflow: hidden;
    }

    .btn-pagar::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255,255,255,0.2);
      transition: left 0.5s;
    }

    .btn-pagar:hover::before {
      left: 100%;
    }

    .btn-pagar:hover {
      background: linear-gradient(135deg, #E07B2F 0%, #D2691E 100%);
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(210, 105, 30, 0.4);
    }

    .btn-pagar:active {
      transform: translateY(-1px);
    }

    /* Responsive */
    @media (max-width: 900px) {
      .page-layout { padding: 0 12px; }
      .main-header { padding: 20px; }
      .titulo-tienda { font-size: 36px; }
      .logo { width: 60px; height: 60px; font-size: 30px; }
      .icono-tienda { font-size: 36px; }
      .filtros { flex-direction: column; }
      .productos-grid { grid-template-columns: repeat(auto-fill, minmax(240px,1fr)); }
    }

    /* Animaci√≥n de carga */
    .loading {
      text-align: center;
      padding: 50px;
      font-size: 24px;
      color: #8B4513;
      animation: pulse 1.5s ease-in-out infinite;
    }
  </style>
</head>
<body>

  <div class="top-bar">
    <button class="btn-regresar" onclick="window.location.href='https://lacabannarese.github.io/frontend/index.html'">‚Üê Inicio</button>
    <span>Bienvenido a nuestra tienda</span>
  </div>

  <div class="main-header">
    <h1 class="titulo-tienda">Tienda La Caba√±a üõí</h1>
  </div>

  <div class="container">

    <div class="filtros">
      <div>
        <label>Buscar ingrediente:</label>
        <input type="text" id="busqueda" placeholder="Ej. Harina, papa..." onkeyup="buscar()">
      </div>

      <button class="carrito-btn" onclick="abrirCarrito()">
        Carrito (<span id="carrito-cantidad">0</span>)
      </button>
    </div>

    <div id="productos-container" class="productos-grid">
      <div class="loading">Cargando...</div>
    </div>

  </div>

  <!-- Modal Carrito -->
  <div id="modal-carrito" class="modal">
    <div class="modal-contenido">
      <button class="btn-cerrar" onclick="cerrarCarrito()">‚úï</button>

      <h2>Mi Carrito</h2>
      <div id="carrito-items"></div>

      <h3 id="total-carrito">Total: $0</h3>

      <button class="btn-pagar" onclick="irAPagar()">Proceder al pago üí≥</button>
    </div>
  </div>


<script>
  let productos = [
      // HARINAS Y GRANOS
      {
        id: 1,
        title: "Harina de trigo",
        price: 28.00,
        description: "Harina de trigo todo uso, ideal para pan y reposter√≠a.",
        image: "img/Harina de trigo.jpeg",
        category: "harinas",
        cantidad: 1,
        stock: 45,
        unidad: "1 kg"
      },
      {
        id: 2,
        title: "Harina de ma√≠z",
        price: 22.00,
        description: "Harina de ma√≠z nixtamalizado para tortillas y tamales.",
        image: "img/Harina de ma√≠z.jpeg",
        category: "harinas",
        cantidad: 1,
        stock: 38,
        unidad: "1 kg"
      },
      {
        id: 3,
        title: "Harina integral",
        price: 35.00,
        description: "Harina integral de trigo, rica en fibra.",
        image: "img/Harina integral.jpeg",
        category: "harinas",
        cantidad: 1,
        stock: 28,
        unidad: "1 kg"
      },
      
      // ACEITES
      {
        id: 4,
        title: "Aceite de oliva",
        price: 85.00,
        description: "Aceite de oliva extra virgen, primera extracci√≥n en fr√≠o.",
        image: "img/aceite de oliva.jpeg",
        category: "aceites",
        cantidad: 1,
        stock: 23,
        unidad: "1 L"
      },
      {
        id: 5,
        title: "Aceite vegetal",
        price: 45.00,
        description: "Aceite vegetal para cocinar, bajo en grasas saturadas.",
        image: "img/Aceite vegetal.jpeg",
        category: "aceites",
        cantidad: 1,
        stock: 67,
        unidad: "1 L"
      },
      {
        id: 6,
        title: "Aceite de coco",
        price: 95.00,
        description: "Aceite de coco org√°nico, ideal para cocina saludable.",
        image: "img/Aceite de coco.jpeg",
        category: "aceites",
        cantidad: 1,
        stock: 18,
        unidad: "500 ml"
      },
      
      // AZ√öCARES Y ENDULZANTES
      {
        id: 7,
        title: "Az√∫car morena",
        price: 25.00,
        description: "Az√∫car morena natural sin refinar, sabor intenso.",
        image: "img/Az√∫car morena.jpeg",
        category: "azucares",
        cantidad: 1,
        stock: 67,
        unidad: "1 kg"
      },
      {
        id: 8,
        title: "Az√∫car blanca",
        price: 22.00,
        description: "Az√∫car blanca refinada est√°ndar.",
        image: "img/Az√∫car blanca.jpeg",
        category: "azucares",
        cantidad: 1,
        stock: 82,
        unidad: "1 kg"
      },
      {
        id: 9,
        title: "Miel de abeja",
        price: 120.00,
        description: "Miel de abeja 100% pura y natural.",
        image: "img/Miel de abeja.jpeg",
        category: "azucares",
        cantidad: 1,
        stock: 34,
        unidad: "500 g"
      },
      
      // L√ÅCTEOS Y QUESOS
      {
        id: 10,
        title: "Queso Boursin Echalote",
        price: 189.00,
        description: "Queso franc√©s cremoso con finas hierbas y echalote.",
        image: "img/echalote-boursin-w.jpg",
        category: "lacteos",
        cantidad: 1,
        stock: 8,
        unidad: "150 g"
      },
      {
        id: 11,
        title: "Queso manchego",
        price: 165.00,
        description: "Queso manchego a√±ejo, sabor intenso.",
        image: "img/Queso manchego.jpeg",
        category: "lacteos",
        cantidad: 1,
        stock: 15,
        unidad: "250 g"
      },
      {
        id: 12,
        title: "Queso Oaxaca",
        price: 75.00,
        description: "Queso Oaxaca tipo hebra, perfecto para quesadillas.",
        image: "img/Queso Oaxaca.jpeg",
        category: "lacteos",
        cantidad: 1,
        stock: 42,
        unidad: "400 g"
      },
      {
        id: 13,
        title: "Crema √°cida",
        price: 38.00,
        description: "Crema √°cida fresca para acompa√±ar tus platillos.",
        image: "img/Crema √°cida.jpeg",
        category: "lacteos",
        cantidad: 1,
        stock: 56,
        unidad: "250 ml"
      },
      {
        id: 14,
        title: "Mantequilla sin sal",
        price: 58.00,
        description: "Mantequilla sin sal, ideal para reposter√≠a.",
        image: "img/Mantequilla sin sal.jpeg",
        category: "lacteos",
        cantidad: 1,
        stock: 48,
        unidad: "250 g"
      },
      
      // CARNES Y PESCADOS
      {
        id: 15,
        title: "Carne de Langosta",
        price: 450.00,
        description: "Carne de langosta fresca congelada, premium.",
        image: "img/Carne de Langosta.jpeg",
        category: "mariscos",
        cantidad: 1,
        stock: 12,
        unidad: "500 g"
      },
      {
        id: 16,
        title: "Bacalao",
        price: 685.00,
        description: "Tiras de bacalao congelado del Atl√°ntico.",
        image: "img/Bacalao.jpeg",
        category: "pescados",
        cantidad: 1,
        stock: 5,
        unidad: "1 kg"
      },
      {
        id: 17,
        title: "Camarones",
        price: 285.00,
        description: "Camarones grandes limpios y desvenados.",
        image: "img/Camarones.jpeg",
        category: "mariscos",
        cantidad: 1,
        stock: 28,
        unidad: "500 g"
      },
      {
        id: 18,
        title: "Salm√≥n",
        price: 320.00,
        description: "Filete de salm√≥n fresco del Pac√≠fico.",
        image: "img/Salm√≥n.jpeg",
        category: "pescados",
        cantidad: 1,
        stock: 18,
        unidad: "500 g"
      },
      {
        id: 19,
        title: "Pavo Entero",
        price: 320.00,
        description: "Pavo entero fresco, ideal para ocasiones especiales.",
        image: "img/3.jpg",
        category: "aves",
        cantidad: 1,
        stock: 15,
        unidad: "4-5 kg"
      },
      {
        id: 20,
        title: "Pechuga de pollo",
        price: 95.00,
        description: "Pechuga de pollo fresca sin hueso.",
        image: "img/Pechuga de pollo.jpeg",
        category: "aves",
        cantidad: 1,
        stock: 65,
        unidad: "1 kg"
      },
      {
        id: 21,
        title: "Carne molida de res",
        price: 110.00,
        description: "Carne molida de res magra 80/20.",
        image: "img/Carne molida de res.jpeg",
        category: "carnes",
        cantidad: 1,
        stock: 52,
        unidad: "1 kg"
      },
      
      // VERDURAS Y TUB√âRCULOS
      {
        id: 22,
        title: "Papa",
        price: 24.00,
        description: "Papa blanca fresca de calidad, versatil para cualquier preparaci√≥n.",
        image: "img/1.png",
        category: "verduras",
        cantidad: 1,
        stock: 89,
        unidad: "1 kg"
      },
      {
        id: 23,
        title: "Cebolla blanca",
        price: 28.00,
        description: "Cebolla blanca fresca, ingrediente esencial.",
        image: "img/Cebolla blanca.jpeg",
        category: "verduras",
        cantidad: 1,
        stock: 76,
        unidad: "1 kg"
      },
      {
        id: 24,
        title: "Tomate",
        price: 32.00,
        description: "Tomate bola rojo maduro y jugoso.",
        image: "img/Tomate.jpeg",
        category: "verduras",
        cantidad: 1,
        stock: 68,
        unidad: "1 kg"
      },
      {
        id: 25,
        title: "Zanahoria",
        price: 22.00,
        description: "Zanahoria fresca, rica en vitamina A.",
        image: "img/Zanahoria.jpeg",
        category: "verduras",
        cantidad: 1,
        stock: 84,
        unidad: "1 kg"
      },
      {
        id: 26,
        title: "Ajo",
        price: 45.00,
        description: "Ajo fresco en cabeza, aroma intenso.",
        image: "img/Ajo.jpeg",
        category: "verduras",
        cantidad: 1,
        stock: 58,
        unidad: "250 g"
      },
      {
        id: 27,
        title: "Chile jalape√±o",
        price: 35.00,
        description: "Chile jalape√±o fresco, nivel medio de picor.",
        image: "img/Chile jalape√±o.jpeg",
        category: "verduras",
        cantidad: 1,
        stock: 47,
        unidad: "500 g"
      },
      
      // LEGUMBRES Y GRANOS
      {
        id: 28,
        title: "Arroz blanco",
        price: 26.00,
        description: "Arroz blanco de grano largo, calidad premium.",
        image: "img/arroz.jpeg",
        category: "granos",
        cantidad: 1,
        stock: 52,
        unidad: "1 kg"
      },
      {
        id: 29,
        title: "Frijol negro",
        price: 32.00,
        description: "Frijol negro seco de primera calidad.",
        image: "img/Frijol negro.jpeg",
        category: "legumbres",
        cantidad: 1,
        stock: 64,
        unidad: "1 kg"
      },
      {
        id: 30,
        title: "Lentejas",
        price: 28.00,
        description: "Lentejas secas, fuente excelente de prote√≠na vegetal.",
        image: "img/Lentejas.jpeg",
        category: "legumbres",
        cantidad: 1,
        stock: 34,
        unidad: "500 g"
      },
      {
        id: 31,
        title: "Garbanzos",
        price: 35.00,
        description: "Garbanzos secos, deliciosa legumbre nutritiva.",
        image: "img/Garbanzos.jpeg",
        category: "legumbres",
        cantidad: 1,
        stock: 41,
        unidad: "500 g"
      },
      {
        id: 32,
        title: "Soja",
        price: 32.00,
        description: "Soja seca texturizada, alta en prote√≠nas.",
        image: "img/soja.jpeg",
        category: "legumbres",
        cantidad: 1,
        stock: 0,
        unidad: "500 g"
      },
      
      // PASTAS Y CEREALES
      {
        id: 33,
        title: "Pasta fusilli",
        price: 28.00,
        description: "Pasta fusilli de s√©mola de trigo durum.",
        image: "img/Pasta fusilli.jpeg",
        category: "pastas",
        cantidad: 1,
        stock: 72,
        unidad: "500 g"
      },
      {
        id: 34,
        title: "Pasta espagueti",
        price: 26.00,
        description: "Pasta espagueti tradicional italiana.",
        image: "img/Pasta espagueti.jpeg",
        category: "pastas",
        cantidad: 1,
        stock: 88,
        unidad: "500 g"
      },
      {
        id: 35,
        title: "Avena en hojuelas",
        price: 38.00,
        description: "Avena en hojuelas natural, rica en fibra.",
        image: "img/Avena en hojuelas.jpeg",
        category: "cereales",
        cantidad: 1,
        stock: 56,
        unidad: "1 kg"
      },
      
      // ESPECIAS Y CONDIMENTOS
      {
        id: 36,
        title: "Sal de mar",
        price: 18.00,
        description: "Sal de mar natural sin refinar.",
        image: "img/Sal de mar.jpeg",
        category: "condimentos",
        cantidad: 1,
        stock: 95,
        unidad: "1 kg"
      },
      {
        id: 37,
        title: "Pimienta negra",
        price: 48.00,
        description: "Pimienta negra molida, aroma intenso.",
        image: "img/Pimienta negra.jpeg",
        category: "especias",
        cantidad: 1,
        stock: 43,
        unidad: "100 g"
      },
      {
        id: 38,
        title: "Or√©gano seco",
        price: 25.00,
        description: "Or√©gano seco mexicano de primera.",
        image: "img/Or√©gano seco.jpeg",
        category: "especias",
        cantidad: 1,
        stock: 38,
        unidad: "50 g"
      },
      {
        id: 39,
        title: "Comino molido",
        price: 32.00,
        description: "Comino molido, esencial en la cocina mexicana.",
        image: "img/Comino molido.jpeg",
        category: "especias",
        cantidad: 1,
        stock: 29,
        unidad: "100 g"
      },
      {
        id: 40,
        title: "Canela en raja",
        price: 42.00,
        description: "Canela de Ceylon en raja, aroma dulce.",
        image: "img/Canela en raja.jpeg",
        category: "especias",
        cantidad: 1,
        stock: 31,
        unidad: "100 g"
      },
      
      // ENLATADOS Y CONSERVAS
      {
        id: 41,
        title: "Tomate en lata",
        price: 22.00,
        description: "Tomate pelado en cubos, listo para usar.",
        image: "img/Tomate en latajpeg",
        category: "enlatados",
        cantidad: 1,
        stock: 67,
        unidad: "400 g"
      },
      {
        id: 42,
        title: "Ma√≠z dulce",
        price: 18.00,
        description: "Granos de ma√≠z dulce en conserva.",
        image: "img/Ma√≠z dulce.jpeg",
        category: "enlatados",
        cantidad: 1,
        stock: 74,
        unidad: "350 g"
      },
      {
        id: 43,
        title: "At√∫n en agua",
        price: 25.00,
        description: "At√∫n aleta amarilla en agua, bajo en grasa.",
        image: "img/At√∫n en agua.jpeg",
        category: "enlatados",
        cantidad: 1,
        stock: 82,
        unidad: "140 g"
      },
      
      // FRUTAS SECAS Y NUECES
      {
        id: 44,
        title: "Almendras",
        price: 165.00,
        description: "Almendras naturales sin sal, ricas en vitamina E.",
        image: "img/Almendras.jpeg",
        category: "frutos-secos",
        cantidad: 1,
        stock: 26,
        unidad: "500 g"
      },
      {
        id: 45,
        title: "Nueces",
        price: 185.00,
        description: "Nueces de Castilla sin c√°scara.",
        image: "img/Nueces.jpeg",
        category: "frutos-secos",
        cantidad: 1,
        stock: 19,
        unidad: "500 g"
      },
      {
        id: 46,
        title: "Cacahuates",
        price: 55.00,
        description: "Cacahuates tostados sin sal.",
        image: "img/Cacahuates.jpeg",
        category: "frutos-secos",
        cantidad: 1,
        stock: 48,
        unidad: "500 g"
      },
      
      // CHOCOLATE Y REPOSTER√çA
      {
        id: 47,
        title: "Chocolate oscuro",
        price: 75.00,
        description: "Chocolate amargo 70% cacao, ideal para reposter√≠a.",
        image: "img/Chocolate oscuro.jpeg",
        category: "reposteria",
        cantidad: 1,
        stock: 36,
        unidad: "200 g"
      },
      {
        id: 48,
        title: "Vainilla en extracto",
        price: 95.00,
        description: "Extracto puro de vainilla natural.",
        image: "img/Vainilla en extracto.jpeg",
        category: "reposteria",
        cantidad: 1,
        stock: 22,
        unidad: "100 ml"
      },
      {
        id: 49,
        title: "Polvo para hornear",
        price: 28.00,
        description: "Polvo para hornear Royal, doble acci√≥n.",
        image: "img/Polvo para hornear.jpeg",
        category: "reposteria",
        cantidad: 1,
        stock: 58,
        unidad: "100 g"
      },
      {
        id: 50,
        title: "Cacao en polvo",
        price: 65.00,
        description: "Cacao en polvo sin az√∫car, 100% puro.",
        image: "img/Cacao en polvo.jpeg",
        category: "reposteria",
        cantidad: 1,
        stock: 44,
        unidad: "250 g"
      },
    ];


  let carrito = [];

  function cargarProductos() {
    mostrarProductos(productos);
  }

function mostrarProductos(lista) {
  const container = document.getElementById("productos-container");
  container.innerHTML = "";

  if (lista.length === 0) {
    container.innerHTML = '<div class="loading">No se encontraron productos üòï</div>';
    return;
  }

  lista.forEach(p => {
    // Determinar clase de stock
    let stockClass = "";
    let stockText = `Stock: ${p.stock}`;
    
    if (p.stock === 0) {
      stockClass = "agotado";
      stockText = "Agotado";
    } else if (p.stock <= 10) {
      stockClass = "bajo";
      stockText = `¬°√öltimos ${p.stock}!`;
    }

    // Deshabilitar bot√≥n si no hay stock
    const botonDisabled = p.stock === 0 ? 'disabled' : '';
    const textoBoton = p.stock === 0 ? 'Sin stock' : 'Agregar al carrito';

    container.innerHTML += `
      <div class="producto-card">
        <span class="stock-badge ${stockClass}">${stockText}</span>
        <span class="unidad-medida">${p.unidad}</span>
        <img class="producto-img" src="${p.image}" alt="${p.title}" />
        <h3>${p.title}</h3>
        <p class="producto-descripcion">${p.description}</p>
        <p class="precio">$${p.price.toFixed(2)}</p>
        <button class="btn-agregar" onclick="agregar(${p.id})" ${botonDisabled}>
          ${textoBoton}
        </button>
      </div>
    `;
  });
}

  function buscar() {
    const texto = document.getElementById("busqueda").value.toLowerCase();
    const filtrados = productos.filter(p => p.title.toLowerCase().includes(texto));
    mostrarProductos(filtrados);
  }

function agregar(id) {
  const prod = productos.find(p => p.id == id);
  
  // Validar stock disponible
  if (prod.stock === 0) {
    alert('‚ö†Ô∏è Producto agotado');
    return;
  }
  
  const existe = carrito.find(c => c.id == id);

  if (existe) {
    // Verificar que no se exceda el stock
    if (existe.cantidad >= prod.stock) {
      alert(`‚ö†Ô∏è Stock insuficiente. Solo quedan ${prod.stock} unidades disponibles.`);
      return;
    }
    existe.cantidad++;
  } else {
    carrito.push({ ...prod });
  }

  actualizarCarrito();
}

function actualizarCarrito() {
  const cantidad = carrito.reduce((s, i) => s + i.cantidad, 0);
  document.getElementById("carrito-cantidad").textContent = cantidad;

  let html = "";
  let total = 0;

  carrito.forEach(i => {
    total += i.cantidad * i.price;
    html += `
      <div class="carrito-item">
        <div class="carrito-item-info">
          <div class="carrito-item-nombre">${i.title}</div>
          <div class="carrito-item-unidad">${i.unidad}</div>
        </div>
        <div>
          <strong>x${i.cantidad}</strong> ‚Äî $${(i.price * i.cantidad).toFixed(2)}
        </div>
      </div>
    `;
  });

  document.getElementById("carrito-items").innerHTML = html || '<p style="text-align:center; color:#999;">Carrito vac√≠o</p>';
  document.getElementById("total-carrito").textContent = "Total: $" + total.toFixed(2);
}

  function abrirCarrito() {
    document.getElementById("modal-carrito").style.display = "block";
  }

  function cerrarCarrito() {
    document.getElementById("modal-carrito").style.display = "none";
  }

  function irAPagar() {
    const total = carrito.reduce((s, i) => s + i.cantidad * i.price, 0);

    sessionStorage.setItem("carrito", JSON.stringify(carrito));
    sessionStorage.setItem("total", total.toFixed(2));

    window.location.href = "pago.html";
  }

  window.onload = cargarProductos;
</script>

</body>
</html>
